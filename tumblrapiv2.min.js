/*!
 * Tumblr API v2 - Wrapper Prototype Class
 * http://tetsuwo.tumblr.com
 *
 * Copyright 2011, Tetsuwo OISHI
 * Dual license under the MIT license
 *
 * Date: 2011-11-07
 */
function TumblrAPIv2(){this.initialize.apply(this,arguments)}
TumblrAPIv2.prototype={initialize:function(a){this.api_url="http://api.tumblr.com/v2";this.times=0;this.requests=[];this.data=[];this.debug=false;this.win=document.defaultView||document.parentWindow;this.name="TumblrAPIv2";this.config={api_key:null,base_hostname:null};if(a){if(a.debug)this.debug=a.debug;if(a.apiKey)this.config.api_key=a.apiKey;if(a.baseHostname)this.config.base_hostname=a.baseHostname}this.output(a)},setApiKey:function(a){this.config.api_key=a;return this},setBaseHostname:function(a){this.config.base_hostname=
a;return this},output:function(a){this.debug&&console.log(a)},serialize:function(a,c){var b=[],d;for(d in a){var f=c?c+"["+d+"]":d,e=a[d];b.push(typeof e=="object"?this.serialize(e,f):encodeURIComponent(f)+"="+encodeURIComponent(e))}return b.join("&")},api:function(a,c,b){var d=this.name+"_"+this.times;this.win[d]=b;c=c||{};c.api_key=this.config.api_key;c.jsonp=d;this.requests[this.times]={method:a,param:c,callback:b,callbackName:d};if(c.limit==="all")c.limit=null;this.times++;b=document.createElement("script");
b.type="text/javascript";b.async=true;b.src=this.api_url;b.src+=a.indexOf("/blog")===0?a.replace("/blog","/blog/"+this.config.base_hostname):a;b.src+="?"+this.serialize(c);this.output(b.src);a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a);return this}};
