/*!
 * Tumblr API v2 - Wrapper Prototype Class
 * http://tetsuwo.tumblr.com
 *
 * Copyright 2011, Tetsuwo OISHI
 * Dual license under the MIT license
 *
 * Date: 2011-11-07
 */
function TumblrAPIv2(){this.initialize.apply(this,arguments)}
TumblrAPIv2.prototype={initialize:function(a){this.output(a);this.api_url="http://api.tumblr.com/v2";this.times=0;this.requests=[];this.data=[];this.debug=true;this.win=document.defaultView||document.parentWindow;this.name="tumblr_api_v2";this.config={api_key:null,base_hostname:null};if(a&&a.api_key)this.config.api_key=a.api_key;if(a&&a.base_hostname)this.config.base_hostname=a.base_hostname},setApiKey:function(a){this.config.api_key=a},setBaseHostname:function(a){this.config.base_hostname=a},output:function(a){this.debug&&
console.log(a)},api:function(a,c,b){var d=this.name+"_"+this.times;this.win[d]=b;c=c||[];c.push("api_key="+this.config.api_key);c.push("jsonp="+d);this.requests[this.times]={method:a,param:c,callback:b,callbackName:d};this.times++;b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=this.api_url;b.src+=a.indexOf("/blog")===0?a.replace("/blog","/blog/"+this.config.base_hostname):a;b.src+="?"+c.join("&");this.output(b.src);a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,
a)}};
